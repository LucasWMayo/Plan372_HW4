---
title: "HW4"
date: 11/6/2024
---

```{r}
library(tidyverse)
library(ggthemes)

```

```{r}
data = read_csv(here::here("airport_pairs.csv"))
head(data)

```

```{r}
print(origin)
```

```{r}
summary(data)
```

```{r}
rdu_routes <- data |>
  filter(origin == "RDU" | dest == "RDU")
```

```{r}
rdu_routes_passengerfilter <- rdu_routes |>
  filter(passengers > 10000)
```

```{r}
rdu_saturation_table <- rdu_routes_passengerfilter |>
  group_by(origin, dest) |>
  summarize(total_passenger = sum(passengers)) |>
  ungroup()
```

```{r}
print(rdu_saturation_table)
```

```{r}
install.packages("tidycensus")

```

```{r}
library(tidycensus)
```

```{r}
census_api_key("863d1963fff9954a0f7bfc13d7ea0dedc02a8034")
```

```{r}
cbsa_population <- get_acs(geography = "metropolitan statistical area/micropolitan statistical area", variables = "B01003_001", year = 2022) %>%
  rename(cbsa = GEOID, population = estimate)

head(cbsa_population)

```

```{r}

data <- data |>
  mutate(origin_cbsa = as.character(origin_cbsa),
         dest_cbsa = as.character(dest_cbsa))

origin_population_data <- data |>
  left_join(cbsa_population, by = c("origin_cbsa" = "cbsa")) |>
  rename(origin_pop = population)


destination_population_data <- origin_population_data |>
  left_join(cbsa_population, by = c("dest_cbsa" = "cbsa")) |>
  rename(dest_pop = population)

head(destination_population_data)

```
